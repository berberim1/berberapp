/* ===========================================================
   MOBILE / TABLET OVERRIDES – stats-and-reports.html (≤1024px)
   Yana kayma YOK • Aside alta iner • Tablolar/kanvas taşmaz
   =========================================================== */

/* 0) Yana kaymayı tamamen KAPAT (sayfa çapında) */
html, body { width:100% !important; max-width:100% !important; overflow-x:hidden !important; }
@supports (overflow: clip){ body{ overflow-x:clip !important; } }
*, *::before, *::after { box-sizing:border-box; }

/* Ortak medya öğeleri ekrana sığsın */
img, svg, canvas, video { max-width:100% !important; height:auto !important; display:block; }

/* 1) Rail boşluğu kapat + bottom bar */
@media (max-width:1024px){
  :root{ --rail-width:0px; }
  body{ margin-left:0 !important; }

  /* Ana kap: 100vw’i asla aşmasın */
  .wrap{
    width:100% !important; max-width:100vw !important;
    margin:0 auto; padding:12px 12px 90px;
    overflow-x:hidden !important;
  }

  /* Güvenlik için üst kapsayıcıların hepsi 100vw’i aşmasın */
  .wrap, .header, .tabs, nav.rail, .overlay, .bm-modal, .modal { max-width:100vw !important; }

  nav.rail{
    position:fixed !important; left:0; right:0; bottom:0; top:auto !important;
    width:100% !important; height:60px !important;
    border-top:1px solid var(--border); border-right:0 !important;
    background:#0f172a; z-index:5000;
    display:flex; align-items:center; justify-content:space-around; padding:0 6px;
  }
  nav.rail .rail__list{ display:flex; width:100%; height:100%; align-items:center; justify-content:space-around; }
  nav.rail .rail__item{ list-style:none; height:100%; flex:1; }
  nav.rail .rail__btn{
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    height:100%; gap:4px; color:#cbd5e1; border-radius:0; padding:0; flex:1;
  }
  nav.rail .rail__btn[aria-current="page"]{ color:#fff; }
  nav.rail .ico{ width:20px; height:20px; stroke:currentColor; fill:none; }
  nav.rail .rail__bottom{ display:none !important; } /* profil butonu bu sayfada yok */
}

/* 2) Başlık + sekmeler yapışkan ve güvenli genişlik */
@media (max-width:1024px){
  .header{
    position:sticky; top:0; z-index:1200; background:var(--page-bg);
    padding:12px 12px; border-bottom:1px solid var(--border); margin-bottom:0;
    max-width:100vw !important;
  }
  .header .title{ font-size:18px; font-weight:800; }
  .header .period .btn{ height:36px; }

  .tabs{
    position:sticky; top:56px; z-index:1190; background:var(--page-bg);
    border-bottom:1px solid var(--border); padding:8px 12px; margin-bottom:12px;
    display:flex; gap:6px; overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch;
    max-width:100vw !important;
  }
  .tabs .tab{ white-space:nowrap; padding:8px 10px; border-radius:10px; }
  .tabs .tab[aria-selected="true"]{ background:#fff; border:1px solid var(--border); }
}

/* 3) Gridleri tek kolona ZORLA + çocuklara min-width:0 (kritik) */
@media (max-width:1024px){
  .grid{ display:grid; grid-template-columns:minmax(0,1fr) !important; gap:12px; max-width:100vw !important; }
  .grid--single{ display:grid; grid-template-columns:minmax(0,1fr) !important; gap:12px; max-width:100vw !important; }
  .grid > *, .grid--single > *{ min-width:0 !important; max-width:100% !important; }
  .grid > .right{ order:2; }
}

/* 4) Kartlar – hiçbir iç blok taşmasın */
@media (max-width:1024px){
  .card.panel{ border-radius:12px; min-width:0 !important; max-width:100% !important; overflow-x:hidden !important; }
  .card .card-body{ padding:14px; overflow-x:hidden !important; max-width:100% !important; }
  .card .card-title{ font-size:14px; font-weight:800; }

  .mini{ min-width:0 !important; max-width:100% !important; }
  .mini h4{ font-size:14px; margin:0 0 8px; }
  .kpis{ grid-template-columns:repeat(3,1fr); gap:10px; }

  /* Küçük görsel öğeler */
  .avatar{ width:28px; height:28px; border-radius:50%; background:#eef1f6; display:grid; place-items:center; font-weight:700; }
  .dot{ width:10px; height:10px; border-radius:999px; margin-right:6px; display:inline-block; }
  .bar{ width:100%; height:8px; background:#eef2f7; border-radius:999px; overflow:hidden; }
  .bar i{ display:block; height:100%; background:#16a34a; }

  /* Chart.js kanvası taşımasın */
  .card canvas{ width:100% !important; max-width:100% !important; height:auto !important; }
}

/* 5) Tablolar – sabitleme, kırpma, kelime kırma */
@media (max-width:1024px){
  .table{ width:100% !important; min-width:0 !important; table-layout:fixed !important; border-collapse:collapse; }
  .table th, .table td{
    padding:8px; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    word-break:break-word;
  }
}

/* Randevu Listesi — bazı kolonları gizle */
@media (max-width:640px){
  #app-list .table th:nth-child(3), #app-list .table td:nth-child(3), /* Müşteri */
  #app-list .table th:nth-child(5), #app-list .table td:nth-child(5), /* Personel */
  #app-list .table th:nth-child(7), #app-list .table td:nth-child(7)  /* Tutar */
  { display:none !important; }
}
/* Hizmete göre satışlar — sade görünüm */
@media (max-width:768px){
  #rev-services .table th:nth-child(3),  #rev-services .table td:nth-child(3),  /* Rez. ID */
  #rev-services .table th:nth-child(4),  #rev-services .table td:nth-child(4),  /* Müşteri */
  #rev-services .table th:nth-child(5),  #rev-services .table td:nth-child(5),  /* Süre */
  #rev-services .table th:nth-child(7),  #rev-services .table td:nth-child(7),  /* Eklenti */
  #rev-services .table th:nth-child(8),  #rev-services .table td:nth-child(8),  /* Net */
  #rev-services .table th:nth-child(9),  #rev-services .table td:nth-child(9),  /* İnd.  */
  #rev-services .table th:nth-child(10), #rev-services .table td:nth-child(10), /* Vergi */
  #rev-services .table th:nth-child(11), #rev-services .table td:nth-child(11)  /* Bahşiş */
  { display:none !important; }
}
/* Personel tabloları — gereksiz kolonları gizle */
@media (max-width:640px){
  #staff .table th:nth-child(3), #staff .table td:nth-child(3),
  #staff .table th:nth-child(4), #staff .table td:nth-child(4),
  #staff .table th:nth-child(5), #staff .table td:nth-child(5),
  #staff .table th:nth-child(6), #staff .table td:nth-child(6),
  #staff .table th:nth-child(7), #staff .table td:nth-child(7)
  { display:none !important; }
}

/* 6) Ay seçici modal — mobil genişlik */
@media (max-width:640px){
  .overlay .modal{ width:min(95vw,560px); max-height:90vh; overflow:auto; border-radius:16px; }
  .m-grid{ grid-template-columns:repeat(3,1fr); gap:8px; }
  .m-head{ padding:12px; }
  .m-foot{ padding:12px; }
}

/* 7) Tipografi */
@media (max-width:480px){
  .header .title{ font-size:16px; }
  .mini .row{ font-size:13px; }
  .card .card-title{ font-size:13px; }
}

/* 8) Bar-menu ikon kalınlığı */
nav.rail .ico{ stroke-width:1.9; }
