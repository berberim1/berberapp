/* ===========================
   SETTINGS PAGE (with shared BAR-MENU)
   =========================== */

/* ---- Theme tokens ---- */
:root{
  /* rail değişkenlerini rail.css yönetir; burada sadece yedek genişlik kullanıyoruz */
  --rail-width: 72px;

  --border:#e7e9ee; 
  --muted:#6b7280;
  --bg:#f5f7fb; 
  --ink:#0b0b0c; 
  --card:#fff; 
  --shadow:0 12px 32px rgba(18,24,40,.08);
  --radius:18px; 
  --primary:#111; 
  --primary-ink:#fff; 
  --chip:#eff1f5;

  /* Mobil ölçüler */
  --topbar-h:64px;
  --staff-h:44px;
  --hour-h:56px;

  /* Takvim hizalama (gereken sayfalarda kullanılabilir) */
  --cal-left: 0px;
  --cal-width: 100vw;
}

/* ---- Base ---- */
*{box-sizing:border-box}
html,body{
  margin:0;padding:0;background:var(--bg);color:var(--ink);
  font:15.5px/1.55 "Inter",system-ui
}

/* ===========================
   PAGE LAYOUT
   =========================== */

/* Masaüstünde sol rail için boşluk */
.page{
  margin-left: calc(var(--rail-width, 72px) + 12px);
  padding:22px 22px 40px;
}

.wrap{max-width:1120px; margin:0 auto;}

.pagehead{
  display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px
}
.pagehead h1{margin:0;font-size:28px;font-weight:900}

.page__title{font-size:28px;margin:6px 0 14px;font-weight:900}

/* ===========================
   TOPBAR (modern cam-blur)
   =========================== */
.topbar{
  position: sticky; top: 0; z-index: 950;
  backdrop-filter: saturate(180%) blur(10px);
  background: rgba(245,247,251,.72);
  border-bottom: 1px solid var(--border);
}
.topbar__inner{
  height: 64px; max-width: 1200px;
  margin: 0 auto; padding: 0 16px;
  display: flex; align-items: center; gap: 10px;
}
.topbar .logo{font-weight: 900; letter-spacing:.2px; text-decoration:none; color:#111; font-size:18px}
.topbar .spacer{flex:1}

/* ===========================
   CARDS / FORMS / BUTTONS
   =========================== */
.card{
  background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow);
  border-radius:var(--radius);padding:18px;margin:14px 0
}
.card h2{margin:0 0 6px;font-size:20px;font-weight:900}
.sub{color:var(--muted);margin:0 0 10px}

.grid{display:grid;gap:12px}
.grid2{grid-template-columns:1fr 1fr}
.grid3{grid-template-columns:1fr 1fr 1fr}
/* 3 sütun x 2 satır düzen (İşletme Bilgileri) */
.grid-3x2{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:12px;
}
@media (max-width:980px){
  .grid2,.grid3,.grid-3x2{grid-template-columns:1fr}
}

.input, select, .select, textarea{
  width:100%;border:1.6px solid #e6e8ec;border-radius:12px;padding:12px 14px;font-size:15px;background:#fff
}
.input:focus, select:focus, textarea:focus{
  outline:none;border-color:#cfe3ff;box-shadow:0 0 0 3px rgba(99,102,241,.16)
}
label{font-weight:700;font-size:13px;margin-bottom:6px;display:block;color:#1b1d23}
.hint{color:var(--muted);font-size:12px;margin-top:6px}
textarea{min-height:110px;resize:vertical;line-height:1.45;}

/* Buttons */
.btn{
  border:1px solid #e6e8ec;background:#fff;border-radius:12px;padding:8px 12px;
  font-weight:800;cursor:pointer;transition:transform .04s ease
}
.btn:active{transform:translateY(1px)}
.btn:disabled{opacity:.55;cursor:not-allowed}
.btn.primary{background:#111;color:#fff;border-color:#111}
.btn--ghost{background:transparent}
.btn--ghost:hover{background:#f3f4f6}

.btn--success{
  background:#10b981; border-color:#10b981; color:#fff;
  box-shadow:0 8px 24px rgba(16,185,129,.28);
}
.btn--success:hover{filter:brightness(.98)}
/* değişiklik varken hafif “pulse” */
.btn--success.is-dirty{ animation:btnpulse 1.8s infinite; }
@keyframes btnpulse{
  0%{box-shadow:0 0 0 0 rgba(16,185,129,.45)}
  70%{box-shadow:0 0 0 14px rgba(16,185,129,0)}
  100%{box-shadow:0 0 0 0 rgba(16,185,129,0)}
}

/* Tablo (ayarlar hizmetler) */
.table{border:1px solid var(--border);border-radius:14px;overflow:hidden;background:#fff}
.thead,.tbody{display:grid}
.thead{grid-template-columns:36px 1fr 120px 120px 160px;background:#f7f8fb;border-bottom:1px solid var(--border);font-weight:800}
.tbody{grid-auto-rows:min-content}
.th,.td{padding:10px 12px;border-bottom:1px solid var(--border)}
.tr:last-child .td{border-bottom:0}
.ops{display:flex;gap:8px;align-items:center;justify-content:flex-start}
.ico-btn{
  display:grid;place-items:center;width:38px;height:38px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer
}
.ico{width:18px;height:18px;stroke:#111;fill:none;stroke-width:2}

/* ===========================
   Uploader (çoklu görsel – modern)
   =========================== */
.uploader{border:1px solid var(--border);border-radius:14px;background:#fff;padding:12px}
.uploader__hd{display:flex;align-items:flex-start;justify-content:space-between;gap:14px;margin-bottom:10px}
.thumbs{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap:12px;
}
.thumb{
  position:relative; border:1px solid var(--border);
  border-radius:12px; overflow:hidden; background:#fafafa;
  transition:transform .08s ease, box-shadow .12s ease;
}
.thumb:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,.08); }
.thumb img{ display:block; width:100%; height:120px; object-fit:cover; }
.thumb .del{
  position:absolute;right:8px;top:8px;border:1px solid var(--border);
  background:#fff;border-radius:10px;padding:4px 8px;font-weight:800;cursor:pointer
}
.thumb .loading{
  display:grid;place-items:center;height:120px;color:#555;font-weight:800
}

/* ===========================
   Picker modal (kısaltılmış)
   =========================== */
.picker-ov{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:1200}
.picker-ov.show{display:flex}
.picker{width:min(720px,95vw);background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 12px 32px rgba(0,0,0,.18);overflow:hidden}
.picker__hd{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border)}
.picker__ct{padding:12px 14px}
.picker__ft{padding:12px 14px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}
.chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.chip{background:#eef2f7;border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-weight:700}
.chip .rm{margin-left:6px;border:1px solid var(--border);background:#fff;border-radius:6px;cursor:pointer}
.pick-list{display:grid;gap:8px}
.pick-list .item{display:flex;align-items:center;justify-content:space-between;border:1px solid var(--border);border-radius:12px;padding:8px 10px;background:#fff}
.pick{border:1px solid var(--border);border-radius:10px;padding:6px 10px;font-weight:800;cursor:pointer;background:#fff}
.pick.sel{background:#111;color:#fff;border-color:#111}

/* Toolbar */
.toolbar{margin-top:10px;display:flex;justify-content:flex-end}

/* ===========================
   TOAST
   =========================== */
.toast{
  position:fixed;left:50%;top:84px;transform:translateX(-50%);
  background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:.25s;
  box-shadow:0 10px 30px rgba(0,0,0,.25);z-index:5000
}
.toast.show{opacity:1}

/* ===========================
   NOTIFY (opsiyonel)
   =========================== */
.notify{
  position:fixed; right:12px; bottom:calc(76px + env(safe-area-inset-bottom));
  width:min(360px, 92vw); max-height:60vh; overflow:auto;
  background:#fff; border:1px solid var(--border); border-radius:14px;
  box-shadow:0 18px 44px rgba(0,0,0,.22);
  transform:translateY(10px); opacity:0; pointer-events:none; transition:.18s;
  z-index:1202;
}
.notify.open{ transform:none; opacity:1; pointer-events:auto; }
.notify-head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--border);font-weight:800}
.notify-body{padding:12px}

/* ===========================
   MOBILE (≤768px)
   =========================== */
@media (max-width: 768px) {

  /* Rail alt barda → içerik boşluğu */
  .page{
    margin-left:0;
    padding:16px 14px max(90px, 14px + env(safe-area-inset-bottom));
  }

  /* TOPBAR kompakt + sticky (class adı: topbar__inner) */
  .topbar{ position:sticky; top:0; z-index:900; }
  .topbar__inner{
    height:56px; padding:0 12px;
  }

  /* Staff bar sabit (takvim sayfaları için) */
  .app, .main, .page, .wrap, .calendar{ transform:none !important; perspective:none !important; filter:none !important; }

  #staffRow{
    position: fixed !important;
    top: calc(var(--topbar-h) + env(safe-area-inset-top));
    left: var(--cal-left);
    width: var(--cal-width);
    z-index: 880;
    background: var(--bg);
    padding: 8px 10px;
    display: flex;
    gap: 8px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border-bottom: 1px solid var(--border);
  }
  #staffRow::-webkit-scrollbar{display:none}
  #staffRow > *{
    flex:0 0 auto;
    background: var(--chip);
    border:1px solid var(--border);
    padding:8px 12px;
    border-radius:999px;
    font-weight:700;
    white-space:nowrap;
  }

  /* Takvim içerik tamponu */
  #dayView, #weekView{ padding-top:calc(var(--staff-h) + 8px) }

  .week .wk-head{
    position:sticky; top:calc(var(--topbar-h) + var(--staff-h)); z-index:870;
    background:var(--bg); padding:6px 8px; border-bottom:1px solid var(--border);
  }

  #dayGrid, #wkGrid{
    min-height:auto !important;
    padding-bottom:calc(var(--hour-h) + env(safe-area-inset-bottom)) !important;
  }

  /* Dokunma alanları */
  .ico-btn, .btn{min-height:42px}
}
