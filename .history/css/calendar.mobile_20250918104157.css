/* =============================
ğŸ“± calendar.mobile.css (rev, tam sÃ¼rÃ¼m)
- Her kiÅŸi kolonu = gÃ¶rÃ¼nÃ¼r takvim alanÄ±nÄ±n yarÄ±sÄ±
- Ä°lk gÃ¶rÃ¼nÃ¼ÅŸte 2 kiÅŸi, fazlasÄ± yatay kaydÄ±rma
- Saat hÃ¼creleri mobilde daha uzun
============================= */

:root{
  --border: var(--line);
  --topbar-h: 56px;       /* JS ile dinamik gÃ¼ncelleniyor */
  --cellH: 60px;          /* mobilde saat hÃ¼cresi yÃ¼ksekliÄŸi */
}

/**************
 * â‰¤ 768px
 **************/
@media (max-width: 768px){

  /* --- RAIL â†’ Bottom Nav --- */
  .rail{
    position: fixed; inset: auto 0 0 0;
    width: 100%; height: 64px; padding: 8px 10px;
    display: flex; flex-direction: row; align-items: center; justify-content: space-around;
    border-right: 0; border-top: 1px solid var(--rail-divider);
    box-shadow: 0 -8px 22px rgba(15,17,21,.18); z-index: 1000;
    background: var(--rail-bg);
  }
  .rail__list{ width:100%; flex-direction: row; justify-content: space-around; align-items:center; }
  .rail__item{ flex: 1; }
  .rail__bottom{ display:none; }
  nav.rail .ico{ width:22px; height:22px; }
  .rail__btn[aria-current="page"]::before{ display:none; }
  .rail__btn[data-tip]::after{ display:none; }

  /* Ä°Ã§erikten boÅŸluk: rail altta */
  .app{ padding-bottom: calc(70px + env(safe-area-inset-bottom)); }
  .main{ padding-left: 0 !important; }

  /* --- Topbar (sticky ve kompakt) --- */
  .topbar{
    position: sticky; top: 0; z-index: 900;
    background: var(--panel); border-bottom:1px solid var(--line);
  }
  .topbar-inner{
    display: grid; gap: 8px; padding: 8px 10px;
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "date actions"
      "view actions";
  }
  .date-nav{ grid-area: date; }
  .view-select{ grid-area: view; }
  .actions{ grid-area: actions; align-items:center; }
  .actions .search{ display:none; }

  .view-select .view-chip{
    border-radius:999px; padding:8px 12px; font-weight:800;
    border:1px solid var(--border); background:#fff;
  }

  /* --- GÃ¼n gÃ¶rÃ¼nÃ¼mÃ¼: header sticky, grid dikey scroll --- */
  .calendar{
    margin: 12px;
    display: grid;
    grid-template-rows: auto 1fr;
    height: min(
      calc(100vh - var(--topbar-h,56px) - 24px - env(safe-area-inset-bottom)),
      var(--calH, 9999px)
    );
    overflow-x: auto;       /* yatay scroll burada */
    overflow-y: hidden;     /* dikey scroll sadece .gridâ€™de */
  }

  /* header sticky kalsÄ±n */
  .staff-row{
    position: sticky; top: 0; z-index: 880;
    background:#fcfdff;
  }

  /* Sadece iÃ§erik dikey kayar */
  .grid{
    overflow-y:auto;
    -webkit-overflow-scrolling:touch;
  }

  /* Sol zaman sÃ¼tunu yatayda sabit kalsÄ±n */
  .staff-row .time-head{
    position: sticky; left: 0; z-index: 47; background: #fff;
    box-shadow: 3px 0 0 0 var(--line);
  }
  .grid .time-col{
    position: sticky; left: 0; z-index: 46; background: #fff;
    box-shadow: 3px 0 0 0 var(--line);
  }

  /* Kolonlar:
     - Saat sÃ¼tunu: var(--timeW)
     - Her personel: gÃ¶rÃ¼nÃ¼r alanÄ±n yarÄ±sÄ± (2 kiÅŸi yan yana)
   */
/* Her personel kolonu = gÃ¶rÃ¼nÃ¼r takvim alanÄ±nÄ±n yarÄ±sÄ± */
.staff-row,
.grid{
  grid-template-columns: var(--timeW) repeat(2, calc((100% - var(--timeW)) / 2));
  grid-auto-columns: calc((100% - var(--timeW)) / 2);
  min-width: 0; /* container geniÅŸliÄŸine sÄ±ÄŸsÄ±n; yatay scroll .calendarâ€™da */
}

/* Saat hÃ¼cresi mobilde biraz daha uzun olsun (gÃ¶zle gÃ¶rÃ¼lÃ¼r artÄ±ÅŸ) */
.time-cell, .hour-cell{ height: var(--cellH, 60px); }


  .event, .reservation, .timeoff{
    left:6px; right:6px;
    padding:6px 8px; border-radius:8px; font-size:11px;
  }

  /* --- Hafta gÃ¶rÃ¼nÃ¼mÃ¼ (daha kompakt) --- */
  .week{ margin:10px; }
  .wk-head{
    position: sticky; top: 0; z-index: 870; background:#fff;
    grid-template-columns: 120px repeat(7, minmax(120px,1fr));
  }
  .wk-grid{ grid-template-columns: 120px repeat(7, minmax(120px,1fr)); }
  .wk-col-inner{ height: var(--wkRowH, 150px); }
  .wk-day-btn{ padding: 6px 8px; }
  .wk-staff{ gap: 8px; padding: 8px; }

  /* Yan paneller tam ekran; mevcut davranÄ±ÅŸ korunur */
  .drawer, .svc-panel, .notify{ width:100%; right:-100%; }
  .drawer.open, .svc-panel.open, .notify.open{ right:0; }

  /* Mini takvim: kenarlardan nefes */
  .center-pop{
    width: calc(100vw - 24px);
    top: 12px; left: 50%; transform: translateX(-50%);
    padding: 12px var(--miniPad) 16px; border-radius: 16px;
  }
  .calendar-grid{ gap: 8px; justify-items: center; }
  .calendar-grid .cell{
    width: 40px; height: 40px; border-radius: 12px; font-weight: 600;
  }
}

/**************
 * â‰¤ 480px
 **************/
@media (max-width: 480px){
  :root{ --wkRowH:130px; }
  .topbar-inner{ padding:10px; }
  .view-select .view-chip{ min-width:100px; }
  .name{ font-size:12px; }
  .sub, .muted{ font-size:11px; }
  .time-cell, .hour-cell{ height: var(--cellH); }
  .topbar .search{ display:none; }
}

/* 100dvh desteÄŸi varsa daha stabilize yÃ¼kseklik */
@supports (height: 100dvh){
  @media (max-width: 768px){
    .calendar{
      height: min(
        calc(100dvh - var(--topbar-h,56px) - 24px - env(safe-area-inset-bottom)),
        var(--calH, 9999px)
      );
    }
  }
}
