/* ===========================
   SETTINGS PAGE (with shared BAR-MENU)
   =========================== */

/* ---- Theme tokens ---- */
:root{
  --rail-width: 72px;

  --border:#e7e9ee; --muted:#6b7280;
  --bg:#f5f7fb; --ink:#0b0b0c; --card:#fff; --shadow:0 12px 32px rgba(18,24,40,.08);
  --radius:18px; --primary:#111; --primary-ink:#fff; --chip:#eff1f5;

  --topbar-h:56px; --staff-h:44px; --hour-h:56px;

  --cal-left: 0px;
  --cal-width: 100vw;
}

/* ---- Base ---- */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:15.5px/1.55 "Inter",system-ui}
a{color:inherit} /* link mavisini bastır */

/* ===========================
   PAGE LAYOUT
   =========================== */
.page{ margin-left: calc(var(--rail-width, 72px) + 12px); padding:22px 22px 40px; }
.wrap{max-width:1120px; margin:0 auto;}
.pagehead{ display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px }
.pagehead h1{margin:0;font-size:28px;font-weight:900}

.save{
  position:sticky;top:12px;z-index:20;background:#111;color:#fff;border:0;border-radius:12px;padding:10px 16px;
  font-weight:800;box-shadow:0 8px 24px rgba(0,0,0,.22);cursor:pointer
}
.save:active{transform:translateY(1px)}
.save:disabled{opacity:.6;cursor:not-allowed}

/* ===========================
   CARDS / FORMS / BUTTONS
   =========================== */
.card{
  background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow);
  border-radius:var(--radius);padding:18px;margin:14px 0
}
.card h2{margin:0 0 6px;font-size:20px;font-weight:900}
.sub{color:var(--muted);margin:0 0 10px}

.card__titlebar{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; }

.grid{display:grid;gap:12px}
.grid2{grid-template-columns:1fr 1fr}
.grid3{grid-template-columns:1fr 1fr 1fr}
@media (max-width:980px){.grid2,.grid3{grid-template-columns:1fr}}

.grid-3x2{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
@media (max-width:980px){ .grid-3x2{ grid-template-columns:1fr; } }

.input, select, .select, textarea{
  width:100%;border:1.6px solid #e6e8ec;border-radius:12px;padding:12px 14px;font-size:15px;background:#fff
}
.input:focus, select:focus, textarea:focus{
  outline:none;border-color:#cfe3ff;box-shadow:0 0 0 3px rgba(99,102,241,.16)
}
label{font-weight:700;font-size:13px;margin-bottom:6px;display:block;color:#1b1d23}
.hint{color:var(--muted);font-size:12px;margin-top:6px}
textarea{min-height:110px;resize:vertical;line-height:1.45;}

/* Butonlar */
.btn{
  border:1px solid #e6e8ec;background:#fff;border-radius:12px;padding:8px 12px;font-weight:800;cursor:pointer;
  text-decoration:none;color:#111;
}
.btn.primary,
.btn--primary{background:#111;color:#fff;border-color:#111}
.btn--primary:hover{filter:brightness(.97)}
.btn:focus-visible,.save:focus-visible{outline:3px solid rgba(99,102,241,.35);outline-offset:2px}

/* Varyantlar */
.btn--success{
  background:#10b981; border-color:#10b981; color:#fff;
  box-shadow:0 8px 24px rgba(16,185,129,.28);
}
.btn--success:hover{filter:brightness(.98)}
.btn--success.is-dirty{ animation:btnpulse 1.8s infinite; }
@keyframes btnpulse{
  0%{box-shadow:0 0 0 0 rgba(16,185,129,.45)}
  70%{box-shadow:0 0 0 14px rgba(16,185,129,0)}
  100%{box-shadow:0 0 0 0 rgba(16,185,129,0)}
}
.btn--ghost{background:transparent}
.btn--ghost:hover{background:#f3f4f6}

/* Üst bar – Profilimi Gör (güncellendi) */
#viewProfileBtn{
  border-radius:999px; padding:8px 12px; font-weight:800;
  border:1px solid #e6e8ec; text-decoration:none;
  color:#0f172a; background:#fff;
  box-shadow:0 1px 2px rgba(2,6,23,.06), 0 1px 8px rgba(2,6,23,.04);
  transition: background .15s ease, box-shadow .15s ease, transform .04s ease;
}
#viewProfileBtn:hover{ background:#f8fafc; box-shadow:0 8px 22px rgba(2,6,23,.10); }
#viewProfileBtn:active{ transform:translateY(1px); }

/* ===========================
   HİZMETLER TABLOSU
   =========================== */
.table{border:1px solid var(--border);border-radius:14px;overflow:hidden;background:#fff}
.thead,.tbody{display:grid}
.thead{grid-template-columns:36px 1fr 120px 120px 160px;background:#f7f8fb;border-bottom:1px solid var(--border);font-weight:800}
.tbody{grid-auto-rows:min-content}
.th,.td{padding:10px 12px;border-bottom:1px solid var(--border)}
.tr:last-child .td{border-bottom:0}
.ops{display:flex;gap:8px;align-items:center;justify-content:flex-start}
.ico-btn{ display:grid;place-items:center;width:38px;height:38px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer }
.ico{width:18px;height:18px;stroke:#111;fill:none;stroke-width:2}

.table .tr{ display:grid; grid-template-columns: 36px 1fr 120px 120px 160px; align-items:center; }
.table .td{ padding:8px 10px; display:flex; align-items:center; }
.table .td input.input{ width:100%; height:36px; padding:8px 10px; border-radius:10px; font-size:14px; }
.table .ops{ gap:6px; }
.table .ico-btn{ width:34px; height:34px; border-radius:9px; }

.table .tbody .tr{ position:relative; transition:background .12s ease, box-shadow .12s ease; }
.table .tbody .tr:hover{ background:#f9fafb; box-shadow:0 8px 18px rgba(14,23,38,.05); }

.table--compact .th, .table--compact .td{ padding:8px 10px; }
.table--compact .thead{ background:#f3f5fb; font-size:13px; }
.table--compact .tbody .tr::before{
  content:""; position:absolute; left:0; top:0; bottom:0; width:3px;
  background:linear-gradient(180deg,#10b981,#3b82f6); opacity:.22; border-top-left-radius:6px; border-bottom-left-radius:6px;
}

/* Önerilenler chipleri */
.svc-suggest{ display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 12px; }
.svc-chip{
  --c:#6366f1;
  display:inline-flex; align-items:center; gap:8px;
  border:1px solid color-mix(in oklab, var(--c), #000 0%);
  background: color-mix(in oklab, var(--c), #fff 88%);
  color:#111; padding:6px 10px; border-radius:999px; font-weight:800; cursor:pointer; user-select:none; transition:transform .05s ease;
}
.svc-chip:hover{ transform:translateY(-1px) }
.svc-chip .hint{ font-size:12px; color:#334155; margin:0 }
.svc-chip--green{ --c:#10b981 } .svc-chip--orange{ --c:#f59e0b } .svc-chip--blue{ --c:#3b82f6 } .svc-chip--rose{ --c:#f43f5e } .svc-chip--violet{ --c:#8b5cf6 }

/* Uploader */
.uploader{border:1px solid var(--border);border-radius:14px;background:#fff;padding:12px}
.uploader__hd{display:flex;align-items:flex-start;justify-content:space-between;gap:14px;margin-bottom:10px}
.thumbs{ display:grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap:12px; }
.thumb{ position:relative;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fafafa; transition:transform .08s ease, box-shadow .12s ease; }
.thumb:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,.08); }
.thumb img{ display:block;width:100%;height:120px;object-fit:cover;cursor:zoom-in; transition: transform .18s ease; }
.thumb:hover img{ transform: scale(1.02); }
.thumb .del{ position:absolute;right:6px;top:6px;border:1px solid var(--border);background:#fff;border-radius:8px;padding:4px 6px;font-weight:800;cursor:pointer }
.thumb .loading{
  display:grid;place-items:center;min-height:120px;color:#555;font-weight:800;
  background: repeating-linear-gradient(-45deg,#f6f7f9 0 10px,#eef0f3 10px 20px);
  animation: stripes 1.1s linear infinite;
}
@keyframes stripes { to { background-position: 40px 0; } }

/* ===========================
   GENEL MODAL İSKELETİ (picker)
   =========================== */
.picker-ov{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:1200}
.picker-ov.show{display:flex}
.picker{
  width:min(680px,92vw);
  max-height:82vh;
  background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 12px 32px rgba(0,0,0,.18);
  display:flex;flex-direction:column;overflow:hidden;
}
.picker__hd{ display:flex;align-items:center;justify-content:space-between; padding:12px 14px;border-bottom:1px solid var(--border) }
.picker__hd .btn[data-close]{border-radius:999px;padding:6px 10px;font-weight:900}
.picker__ct{padding:12px 14px; overflow:auto;}
.picker__ft{padding:12px 14px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:8px}
.chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.chip{background:#eef2f7;border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-weight:700}
.chip .rm{margin-left:6px;border:1px solid var(--border);background:#fff;border-radius:6px;cursor:pointer}
.pick-list{display:grid;gap:8px}
.pick-list .item{display:flex;align-items:center;justify-content:space-between;border:1px solid var(--border);border-radius:12px;padding:8px 10px;background:#fff}
.pick{border:1px solid var(--border);border-radius:10px;padding:6px 10px;font-weight:800;cursor:pointer;background:#fff}
.pick.sel{background:#111;color:#fff;border-color:#111}

/* Toolbar */
.toolbar{margin-top:10px;display:flex;justify-content:flex-end}

/* ===========================
   TOAST
   =========================== */
.toast{
  position:fixed;left:50%;top:84px;transform:translateX(-50%);
  background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:.25s;
  box-shadow:0 10px 30px rgba(0,0,0,.25);z-index:1500
}
.toast.show{opacity:1}
.toast.success{ background:#10b981; }
.toast.error{ background:#ef4444; }

/* ===========================
   LIGHTBOX
   =========================== */
#imgViewer{position:fixed;inset:0;display:none;z-index:1400;}
#imgViewer.show{display:block;}
#imgViewer .iv__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);}
#imgViewer .iv__dialog{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  background:#fff;padding:8px;border-radius:12px;
  box-shadow:0 10px 40px rgba(0,0,0,.35);
  max-width:90vw;max-height:85vh;
}
#imgViewer .iv__img{display:block;max-width:86vw;max-height:75vh;width:auto;height:auto;border-radius:8px;}
#imgViewer .iv__close{
  position:absolute;top:-12px;right:-12px;width:32px;height:32px;border:0;border-radius:999px;
  background:#fff;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.2);font-size:16px;line-height:32px;
}

/* ===========================
   NOTIFY (opsiyonel)
   =========================== */
.notify{
  position:fixed; right:12px; bottom:calc(76px + env(safe-area-inset-bottom));
  width:min(360px, 92vw); max-height:60vh; overflow:auto;
  background:#fff; border:1px solid var(--border); border-radius:14px;
  box-shadow:0 18px 44px rgba(0,0,0,.22);
  transform:translateY(10px); opacity:0; pointer-events:none; transition:.18s;
  z-index:1202;
}
.notify.open{ transform:none; opacity:1; pointer-events:auto; }
.notify-head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--border);font-weight:800}
.notify-body{padding:12px}

/* ===========================
   TOPBAR
   =========================== */
.topbar{
  position: sticky; top: 0; z-index: 950;
  backdrop-filter: saturate(180%) blur(10px);
  background: rgba(245,247,251,.72);
  border-bottom: 1px solid var(--border);
}
.topbar__inner{ height: 64px; max-width: 1200px; margin: 0 auto; padding: 0 16px; display: flex; align-items: center; gap: 10px; }
.topbar .logo{font-weight: 900; letter-spacing:.2px; text-decoration:none; color:#111; font-size:18px}
.topbar .spacer{flex:1}
#contactPhone[aria-invalid="true"]{ border-color:#ef4444; box-shadow:0 0 0 3px rgba(239,68,68,.15); }
.phone-input{ font-variant-numeric: tabular-nums; letter-spacing:.4px; }

/* ==========================================
   DÜKKAN SAATLERİ – Kart ve özet
   ========================================== */
.card--hours .card__titlebar{ align-items:flex-start; gap:12px; }
.card--hours .sub{ margin:2px 0 0; font-size:13px; }
#bhSummary{ color:#1f2937; font-weight:700; background:#f3f4f6; border:1px solid var(--border); border-radius:999px; padding:6px 10px; }

/* ==========================================
   DÜKKAN SAATLERİ – MODAL LİSTE
   ========================================== */
.bh-list{ display:flex; flex-direction:column; gap:8px; }
.bh-item{
  display:grid; grid-template-columns: auto 1fr auto; align-items:center; gap:12px;
  padding:12px 12px; border:1px solid var(--border); border-radius:12px; background:#fff;
  box-shadow:0 8px 22px rgba(12,20,35,.06);
  transition: box-shadow .12s ease, transform .06s ease, border-color .12s ease, background .12s ease;
}
.bh-item:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(12,20,35,.08); }
.bh-item .name{ font-weight:900; }
.bh-item [data-summary]{ color:#111; font-weight:700; }
.bh-item.is-closed [data-summary]{ color:var(--muted); font-weight:700; }

/* yeşil toggle (Setmore/Wix benzeri) */
.toggle{ display:inline-flex; align-items:center; gap:10px; }
.toggle input{
  appearance:none; -webkit-appearance:none;
  width:46px; height:28px; border-radius:999px; background:#e6e8ec; border:1px solid var(--border);
  position:relative; transition:background .15s ease, border-color .15s ease, box-shadow .15s ease;
}
.toggle input::after{
  content:""; position:absolute; top:50%; left:4px; width:20px; height:20px; border-radius:999px;
  background:#fff; transform:translateY(-50%); box-shadow:0 1px 3px rgba(0,0,0,.15); transition:transform .15s ease;
}
.toggle input:checked{ background:#10b981; border-color:#10b981; }
.toggle input:checked::after{ transform:translate(18px,-50%); }

/* sağdaki ok */
.chev{
  border:1px solid var(--border); background:#fff; width:38px; height:38px; border-radius:10px;
  display:grid; place-items:center; cursor:pointer;
}
.chev:hover{ background:#f8f9fb }
.chev svg{ width:18px; height:18px; stroke:#111; fill:none; stroke-width:2 }

/* ==========================================
   GÜN DETAY MODALI
   ========================================== */
.bh-form{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
.bh-form .field{ margin:0; }
.input.time, input[type="time"].input{
  width:100%; min-width:120px; height:42px; padding:8px 10px 8px 36px; border-radius:12px;
  font-variant-numeric: tabular-nums;
  background:
    url("data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%238a8f98' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='9'/%3E%3Cpath d='M12 7v5l3 2'/%3E%3C/svg%3E")
    no-repeat 10px 50% / 18px 18px;
}
.input.time::-webkit-calendar-picker-indicator{ opacity:0; }
.input.time:focus{ border-color:#111 !important; box-shadow:0 0 0 4px rgba(17,17,17,.08); }

/* ==========================================
   SAATLERİ KOPYALA MODALI
   ========================================== */
.copy-list{ display:flex; flex-direction:column; gap:8px; }
.copy-row{
  display:flex; align-items:center; justify-content:flex-start; gap:12px;
  border:1px solid var(--border); border-radius:12px; padding:10px 12px; background:#fff;
}
.copy-row input[type="checkbox"]{ width:18px; height:18px; accent-color:#111; }
.copy-row input[type="checkbox"]:disabled{ opacity:.35 }

/* ===========================
   MOBILE (≤768px)
   =========================== */
@media (max-width: 768px) {
  .page{ margin-left:0; padding:16px 14px max(90px, 14px + env(safe-area-inset-bottom)); }

  .topbar{ position:sticky; top:0; z-index:900; background:var(--bg); border-bottom:1px solid var(--border); }
  .topbar__inner{ height:56px; padding:0 12px; }

  /* --- HİZMETLER MOBİL DÜZEN (yenilendi) --- */
  .table.table--compact .thead{ display:none; }          /* başlık satırını gizle */
  .table{ border:0; background:transparent; }            /* kart görünümü */
  .table .tbody{ display:grid; gap:10px; }
  .table .tbody .tr{
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "name ops"
      "min  price";
    row-gap:10px;
    border:1px solid var(--border);
    border-radius:14px;
    background:#fff;
    box-shadow:0 8px 18px rgba(14,23,38,.05);
    padding:10px;
  }
  .table .tbody .tr:hover{ background:#fff; box-shadow:0 10px 22px rgba(14,23,38,.07); }

  .table .td:nth-child(1){ display:none !important; }    /* # sütununu gizle */
  .table .td:nth-child(2){ grid-area:name; }
  .table .td:nth-child(5){ grid-area:ops; justify-content:flex-end; }

  .table .td:nth-child(3){ grid-area:min;  display:flex; flex-direction:column; }
  .table .td:nth-child(4){ grid-area:price; display:flex; flex-direction:column; }

  .table .td:nth-child(3)::before,
  .table .td:nth-child(4)::before{
    font-size:12px; font-weight:800; color:var(--muted); margin:0 0 4px;
  }
  .table .td:nth-child(3)::before{ content:"Süre (dk)"; }
  .table .td:nth-child(4)::before{ content:"Ücret (₺)"; }

  .table .td input.input{ height:42px; font-size:15px; }

  .ico-btn, .save, .btn{min-height:42px}

  /* Takvimle ilgili eski mobil stiller */
  .app, .main, .page, .wrap, .calendar{ transform:none !important; perspective:none !important; filter:none !important; }

  #staffRow{
    position: fixed !important;
    top: calc(var(--topbar-h) + env(safe-area-inset-top));
    left: var(--cal-left);
    width: var(--cal-width);
    z-index: 880;
    background: var(--bg);
    padding: 8px 10px;
    display: flex;
    gap: 8px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border-bottom: 1px solid var(--border);
  }
  #staffRow::-webkit-scrollbar{display:none}
  #staffRow > *{
    flex:0 0 auto; background: var(--chip); border:1px solid var(--border);
    padding:8px 12px; border-radius:999px; font-weight:700; white-space:nowrap;
  }

  #dayView, #weekView{ padding-top:calc(var(--staff-h) + 8px) }
  .week .wk-head{
    position:sticky; top:calc(var(--topbar-h) + var(--staff-h)); z-index:870;
    background:var(--bg); padding:6px 8px; border-bottom:1px solid var(--border);
  }
  #dayGrid, #wkGrid{
    min-height:auto !important;
    padding-bottom:calc(var(--hour-h) + env(safe-area-inset-bottom)) !important;
  }

  /* Saat listesi mobil */
  .bh-form{ grid-template-columns: 1fr; }
}

/* ===========================
   HAREKET HASSASİYETİ
   =========================== */
@media (prefers-reduced-motion: reduce){
  .thumb img, .toast, .table .tbody .tr, .thumb, .bh-item { transition: none; }
  .thumb .loading { animation: none; }
}
