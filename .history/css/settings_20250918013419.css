/* ===========================
   SETTINGS PAGE (with shared BAR-MENU)
   =========================== */

/* ---- Theme tokens ---- */
:root{
  --rail-width: 72px;

  --border:#e7e9ee; --muted:#6b7280;
  --bg:#f5f7fb; --ink:#0b0b0c; --card:#fff; --shadow:0 12px 32px rgba(18,24,40,.08);
  --radius:18px; --primary:#111; --primary-ink:#fff; --chip:#eff1f5;

  --topbar-h:56px;
  --staff-h:44px;
  --hour-h:56px;

  --cal-left: 0px;
  --cal-width: 100vw;
}

/* ---- Base ---- */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:15.5px/1.55 "Inter",system-ui}

/* ===========================
   PAGE LAYOUT
   =========================== */
.page{
  margin-left: calc(var(--rail-width, 72px) + 12px);
  padding:22px 22px 40px;
}

.wrap{max-width:1120px; margin:0 auto;}

.pagehead{
  display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px
}
.pagehead h1{margin:0;font-size:28px;font-weight:900}

.save{
  position:sticky;top:12px;z-index:20;background:#111;color:#fff;border:0;border-radius:12px;padding:10px 16px;
  font-weight:800;box-shadow:0 8px 24px rgba(0,0,0,.22);cursor:pointer
}
.save:active{transform:translateY(1px)}
.save:disabled{opacity:.6;cursor:not-allowed}

/* ===========================
   CARDS / FORMS / BUTTONS
   =========================== */
.card{
  background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow);
  border-radius:var(--radius);padding:18px;margin:14px 0
}
.card h2{margin:0 0 6px;font-size:20px;font-weight:900}
.sub{color:var(--muted);margin:0 0 10px}

/* başlık satırı (Hizmetler kartı için) */
.card__titlebar{
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px;
}

.grid{display:grid;gap:12px}
.grid2{grid-template-columns:1fr 1fr}
.grid3{grid-template-columns:1fr 1fr 1fr}
@media (max-width:980px){.grid2,.grid3{grid-template-columns:1fr}}

/* --- İşletme Bilgileri için 3x2 grid --- */
.grid-3x2{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:12px;
}
@media (max-width:980px){
  .grid-3x2{ grid-template-columns:1fr; }
}

.input, select, .select, textarea{
  width:100%;border:1.6px solid #e6e8ec;border-radius:12px;padding:12px 14px;font-size:15px;background:#fff
}
.input:focus, select:focus, textarea:focus{
  outline:none;border-color:#cfe3ff;box-shadow:0 0 0 3px rgba(99,102,241,.16)
}
label{font-weight:700;font-size:13px;margin-bottom:6px;display:block;color:#1b1d23}
.hint{color:var(--muted);font-size:12px;margin-top:6px}
textarea{min-height:110px;resize:vertical;line-height:1.45;}

/* Butonlar */
.btn{
  border:1px solid #e6e8ec;background:#fff;border-radius:12px;padding:8px 12px;font-weight:800;cursor:pointer;
  text-decoration:none;
}
.btn.primary{background:#111;color:#fff;border-color:#111}
.btn:focus-visible,.save:focus-visible{outline:3px solid rgba(99,102,241,.35);outline-offset:2px}

/* --- Buton varyantları (Kaydet / Profil) --- */
.btn--success{
  background:#10b981; border-color:#10b981; color:#fff;
  box-shadow:0 8px 24px rgba(16,185,129,.28);
}
.btn--success:hover{filter:brightness(.98)}
.btn--success.is-dirty{ animation:btnpulse 1.8s infinite; }
@keyframes btnpulse{
  0%{box-shadow:0 0 0 0 rgba(16,185,129,.45)}
  70%{box-shadow:0 0 0 14px rgba(16,185,129,0)}
  100%{box-shadow:0 0 0 0 rgba(16,185,129,0)}
}
.btn--ghost{background:transparent}
.btn--ghost:hover{background:#f3f4f6}

/* Üst barda "Profilimi Gör" – modern/alt çizgisiz */
#viewProfileBtn{
  border-radius:999px; padding:8px 12px; font-weight:800; border:1px solid #e6e8ec; text-decoration:none;
}
#viewProfileBtn:hover{ background:#f3f4f6; }

/* ===========================
   HİZMETLER TABLOSU
   =========================== */
.table{border:1px solid var(--border);border-radius:14px;overflow:hidden;background:#fff}
.thead,.tbody{display:grid}
.thead{grid-template-columns:36px 1fr 120px 120px 160px;background:#f7f8fb;border-bottom:1px solid var(--border);font-weight:800}
.tbody{grid-auto-rows:min-content}
.th,.td{padding:10px 12px;border-bottom:1px solid var(--border)}
.tr:last-child .td{border-bottom:0}
.ops{display:flex;gap:8px;align-items:center;justify-content:flex-start}
.ico-btn{
  display:grid;place-items:center;width:38px;height:38px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer
}
.ico{width:18px;height:18px;stroke:#111;fill:none;stroke-width:2}

/* --- TEK SATIR: her hizmet satırı yan yana olsun --- */
.table .tr{
  display:grid;
  grid-template-columns: 36px 1fr 120px 120px 160px; /* # | ad | süre | ücret | işlem */
  align-items:center;
}
.table .td{
  padding:8px 10px;
  display:flex;
  align-items:center;
}
.table .td input.input{
  width:100%;
  height:36px;
  padding:8px 10px;
  border-radius:10px;
  font-size:14px;
}
.table .ops{ gap:6px; }
.table .ico-btn{ width:34px; height:34px; border-radius:9px; }

/* Hover süsü */
.table .tbody .tr{
  position:relative;
  transition:background .12s ease, box-shadow .12s ease;
}
.table .tbody .tr:hover{
  background:#f9fafb; box-shadow:0 8px 18px rgba(14,23,38,.05);
}

/* Kompakt varyant */
.table--compact .th,
.table--compact .td{ padding:8px 10px; }
.table--compact .thead{ background:#f3f5fb; font-size:13px; }
.table--compact .tbody .tr::before{
  content:""; position:absolute; left:0; top:0; bottom:0; width:3px;
  background:linear-gradient(180deg,#10b981,#3b82f6);
  opacity:.22; border-top-left-radius:6px; border-bottom-left-radius:6px;
}

/* Önerilenler chip şeridi */
.svc-suggest{
  display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 12px;
}
.svc-chip{
  --c:#6366f1;
  display:inline-flex; align-items:center; gap:8px;
  border:1px solid color-mix(in oklab, var(--c), #000 0%);
  background: color-mix(in oklab, var(--c), #fff 88%);
  color:#111; padding:6px 10px; border-radius:999px;
  font-weight:800; cursor:pointer; user-select:none; transition:transform .05s ease;
}
.svc-chip:hover{ transform:translateY(-1px) }
.svc-chip .hint{ font-size:12px; color:#334155; margin:0 }
.svc-chip--green{ --c:#10b981 }
.svc-chip--orange{ --c:#f59e0b }
.svc-chip--blue{ --c:#3b82f6 }
.svc-chip--rose{ --c:#f43f5e }
.svc-chip--violet{ --c:#8b5cf6 }

/* Uploader */
.uploader{border:1px solid var(--border);border-radius:14px;background:#fff;padding:12px}
.uploader__hd{display:flex;align-items:flex-start;justify-content:space-between;gap:14px;margin-bottom:10px}
.thumbs{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap:12px;
}
.thumb{
  position:relative;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fafafa;
  transition:transform .08s ease, box-shadow .12s ease;
}
.thumb:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,.08); }
.thumb img{display:block;width:100%;height:120px;object-fit:cover}
.thumb .del{
  position:absolute;right:6px;top:6px;border:1px solid var(--border);background:#fff;border-radius:8px;padding:4px 6px;font-weight:800;cursor:pointer
}
.thumb .loading{
  display:grid;place-items:center;min-height:90px;color:#555;font-weight:800
}

/* ===========================
   Picker modal (güncellendi)
   =========================== */
.picker-ov{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:1200}
.picker-ov.show{display:flex}
.picker{
  width:min(680px,92vw);
  max-height:82vh;
  background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 12px 32px rgba(0,0,0,.18);
  display:flex;flex-direction:column;overflow:hidden;
}
.picker__hd{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 14px;border-bottom:1px solid var(--border)
}
.picker__hd .btn[data-close]{border-radius:999px;padding:6px 10px;font-weight:900}
.picker__ct{padding:12px 14px; overflow:auto;}
.picker__ft{padding:12px 14px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}
.chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.chip{background:#eef2f7;border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-weight:700}
.chip .rm{margin-left:6px;border:1px solid var(--border);background:#fff;border-radius:6px;cursor:pointer}
.pick-list{display:grid;gap:8px}
.pick-list .item{display:flex;align-items:center;justify-content:space-between;border:1px solid var(--border);border-radius:12px;padding:8px 10px;background:#fff}
.pick{border:1px solid var(--border);border-radius:10px;padding:6px 10px;font-weight:800;cursor:pointer;background:#fff}
.pick.sel{background:#111;color:#fff;border-color:#111}

/* Toolbar */
.toolbar{margin-top:10px;display:flex;justify-content:flex-end}

/* ===========================
   TOAST (güncellendi)
   =========================== */
.toast{
  position:fixed;left:50%;top:84px;transform:translateX(-50%);
  background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:.25s;
  box-shadow:0 10px 30px rgba(0,0,0,.25);z-index:5000
}
.toast.show{opacity:1}
.toast.success{ background:#10b981; }
.toast.error{ background:#ef4444; }

/* ===========================
   NOTIFY (opsiyonel)
   =========================== */
.notify{
  position:fixed; right:12px; bottom:calc(76px + env(safe-area-inset-bottom));
  width:min(360px, 92vw); max-height:60vh; overflow:auto;
  background:#fff; border:1px solid var(--border); border-radius:14px;
  box-shadow:0 18px 44px rgba(0,0,0,.22);
  transform:translateY(10px); opacity:0; pointer-events:none; transition:.18s;
  z-index:1202;
}
.notify.open{ transform:none; opacity:1; pointer-events:auto; }
.notify-head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--border);font-weight:800}
.notify-body{padding:12px}

/* ===========================
   TOPBAR (modern cam-blur)
   =========================== */
.topbar{
  position: sticky; top: 0; z-index: 950;
  backdrop-filter: saturate(180%) blur(10px);
  background: rgba(245,247,251,.72);
  border-bottom: 1px solid var(--border);
}
.topbar__inner{
  height: 64px; max-width: 1200px;
  margin: 0 auto; padding: 0 16px;
  display: flex; align-items: center; gap: 10px;
}
.topbar .logo{font-weight: 900; letter-spacing:.2px; text-decoration:none; color:#111; font-size:18px}
.topbar .spacer{flex:1}

/* ===========================
   MOBILE (≤768px)
   =========================== */
@media (max-width: 768px) {
  .page{
    margin-left:0;
    padding:16px 14px max(90px, 14px + env(safe-area-inset-bottom));
  }
  .topbar{
    position:sticky; top:0; z-index:900; background:var(--bg); border-bottom:1px solid var(--border);
  }
  .topbar__inner{ height:56px; padding:0 12px; }

  /* Hizmet listesi mobil kırılım */
  .table .tr{
    grid-template-columns: 28px 1fr 100px;
    grid-template-areas: "n name ops"
                         "n extra extra";
    row-gap:6px;
  }
  .table .td:nth-child(1){ grid-area:n; }
  .table .td:nth-child(2){ grid-area:name; }
  .table .td:nth-child(3),
  .table .td:nth-child(4){ grid-area:extra; }
  .table .td:nth-child(5){ grid-area:ops; justify-content:flex-end; }

  .app, .main, .page, .wrap, .calendar{ transform:none !important; perspective:none !important; filter:none !important; }
  #staffRow{
    position: fixed !important;
    top: calc(var(--topbar-h) + env(safe-area-inset-top));
    left: var(--cal-left);
    width: var(--cal-width);
    z-index: 880;
    background: var(--bg);
    padding: 8px 10px;
    display: flex;
    gap: 8px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border-bottom: 1px solid var(--border);
  }
  #staffRow::-webkit-scrollbar{display:none}
  #staffRow > *{
    flex:0 0 auto;
    background: var(--chip);
    border:1px solid var(--border);
    padding:8px 12px;
    border-radius:999px;
    font-weight:700;
    white-space:nowrap;
  }
  #dayView, #weekView{ padding-top:calc(var(--staff-h) + 8px) }
  .week .wk-head{
    position:sticky; top:calc(var(--topbar-h) + var(--staff-h)); z-index:870;
    background:var(--bg); padding:6px 8px; border-bottom:1px solid var(--border);
  }
  #dayGrid, #wkGrid{
    min-height:auto !important;
    padding-bottom:calc(var(--hour-h) + env(safe-area-inset-bottom)) !important;
  }
  .ico-btn, .save, .btn{min-height:42px}
}

/* ===========================
   RAIL OVERRIDES (sabit, opak; sadece aktif mor)
   =========================== */
nav.rail{
  position: fixed;
  top: 0; left: 0;
  height: 100vh;
  z-index: 940;
}
nav.rail .rail__btn{
  opacity: 1 !important;
  filter: none !important;
  color: #111 !important;
}
nav.rail .rail__btn .ico{ stroke: currentColor !important; }
nav.rail .rail__btn:hover{ background: rgba(17,24,39,.05); }
nav.rail .rail__btn[aria-current="page"]{
  background: rgba(99,102,241,.14) !important;
  color: #5b21b6 !important;
  font-weight: 800;
  border-color: transparent;
}
